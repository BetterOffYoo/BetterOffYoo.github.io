require=function t(e,o,n){function i(a,c){if(!o[a]){if(!e[a]){var r="function"==typeof require&&require;if(!c&&r)return r(a,!0);if(s)return s(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var h=o[a]={exports:{}};e[a][0].call(h.exports,function(t){var o=e[a][1][t];return i(o||t)},h,h.exports,t,e,o,n)}return o[a].exports}for(var s="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({"button-manage":[function(t,e,o){"use strict";cc._RF.push(e,"cd01c+B1hRIcKm53v0+wJ+k","button-manage"),cc.Class({extends:cc.Component,properties:{settingViewNode:cc.Node,shopViewNode:cc.Node,audioBtImg:[cc.SpriteFrame]},onLoad:function(){this.audioButtonSprite=cc.find("Canvas/Buttons/audioButton").getComponent(cc.Sprite),this.audioSetting=1},buttonsClick:function(t,e){"setting"===e?this.settingViewNode.active=!0:"shop"===e?this.shopViewNode.active=!0:cc.director.loadScene(e)},audioButtonClick:function(){this.audioSetting=this.audioSetting?0:1,this.audioButtonSprite.spriteFrame=this.audioBtImg[this.audioSetting]},closeSettingButtonClick:function(t){this.scheduleOnce(function(){t.target.parent.active=!1},.1)},buyHorse:function(t){var e=t.target.parent.getChildByName("level").getComponent(cc.Label),o=e.string,n=o.indexOf("."),i=o.slice(n+1);i++,e.string="Lv."+i},buyItem:function(t){var e=t.target.parent.getChildByName("haveNum").getComponent(cc.Label);e.string=e.string-0+1},selectHorseButton:function(t){this.setHorse(t.target.name)},setHorse:function(t){this.selectedHorse=t,this.node.getChildByName("selectHorse").getComponent(cc.Label).string=t;for(var e=cc.find("Canvas/shopView/horseList/view/content").children,o=0;o<e.length;o++){var n=e[o].getChildByName("select");e[o].name===t?n.active=!0:n.active=!1}},musicSlider:function(t){var e=t.handle.node.getChildByName("num").getComponent(cc.Label),o=Math.floor(100*t.progress);e.string=o},tabSwitch:function(t){var e=t.target,o=this.shopViewNode.getChildByName("horseList"),n=this.shopViewNode.getChildByName("itemList");"playerTab"===e.name?(o.active=!0,n.active=!1):"itemTab"===e.name&&(o.active=!1,n.active=!0)}}),cc._RF.pop()},{}],constant:[function(t,e,o){"use strict";cc._RF.push(e,"e26b11T43dKN7wzjHFmpxTZ","constant"),window.constant=window.constant||{},constant.AnimStatus={NONE:-1,RUN:0,JUMP:1},constant.GameStatus={NONE:0,PLAYING:1,PAUSE:2,VICTORY:3,DEFEAT:4},cc._RF.pop()},{}],control:[function(t,e,o){"use strict";cc._RF.push(e,"d82c1Ct55FKkqi0Qj+5G5U+","control"),cc.Class({extends:cc.Component,properties:{jumps:2,jumpSpeed:1300},onLoad:function(){this.Canvas=cc.find("Canvas"),this.gameJs=this.Canvas.getComponent("game"),this.Canvas.on("touchstart",this.onKeyDown,this),this.Canvas.on("touchend",this.onKeyUp,this),this.bodyComp=this.getComponent(cc.RigidBody),this.playerUiJs=this.node.getComponent("playerUi"),this.upFlag=!1,this._upPressed=!1},onDestroy:function(){this.Canvas.off("touchstart",this.onKeyDown,this),this.Canvas.off("touchend",this.onKeyUp,this)},onKeyDown:function(t){this._upPressed||(this.upFlag=!0),this._upPressed=!0},onKeyUp:function(t){this._upPressed=!1},onBeginContact:function(t,e,o){if(this.gameJs.isPlaying()){var n=o.node;switch(n.name){case"jump":this.jumps++,n.destroy();break;case"final":this.gameJs.gameWin(),e.node.destroy(),n.destroy();break;case"thorn":this.gameJs.gameOver(),e.node.destroy()}t.getWorldManifold().normal.x>0&&this.gameJs.gameOver()}},update:function(t){if(this.gameJs.isPlaying()){var e=this.bodyComp.linearVelocity;e.x=0,Math.abs(e.y)<1&&(this.jumps=2),this.jumps>0&&this.upFlag&&(e.y=this.jumpSpeed,this.jumps--),this.upFlag=!1,this.bodyComp.linearVelocity=e,0===e.y&&this.playerUiJs.getAnimStatus()!==constant.AnimStatus.RUN&&this.playerUiJs.runAni()}}}),cc._RF.pop()},{}],game2:[function(t,e,o){"use strict";cc._RF.push(e,"b959eJ/LIdMoao0PHn8pHlv","game2"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.director.getPhysicsManager().enabled=!0,this.gameStatus=null,this.SceneMove=this.node.getComponent("scene-move"),this.floorNode=this.SceneMove.floorsAndStarsNode.getChildByName("floors"),this.victoryOrDefeat=cc.find("Canvas/ui/victoryOrDefeat"),this.goldNumLabel=cc.find("Canvas/ui/goldNum").getComponent(cc.Label),this.goldNumLabel.string=0,this.playerNode=this.node.getChildByName("player"),this.oldGoldNum=cc.sys.localStorage.getItem("goldNum"),this.oldGoldNum=this.oldGoldNum?this.oldGoldNum-0:0},changeGameStatus:function(t){this.gameStatus=t,this.victoryOrDefeat.active=!0,this.victoryOrDefeat.getChildByName("label").getComponent(cc.Label).string=t,this.gameStop(),this.addGoldNum()},gameStop:function(){this.SceneMove.moveFlag=!1;for(var t=this.floorNode.children,e=0;e<t.length;e++)t[e].stopAllActions()},restartButtonClick:function(){cc.director.loadScene("game")},addGoldNum:function(){var t=this.goldNumLabel.string-0;cc.sys.localStorage.setItem("goldNum",t+this.oldGoldNum)},update:function(t){(this.playerNode.x+this.playerNode.width/2<-cc.winSize.width/2||this.playerNode.y+this.playerNode.height/2<-cc.winSize.height/2&&"defeat"!==this.gameStatus)&&this.changeGameStatus("defeat")}}),cc._RF.pop()},{}],gameUi:[function(t,e,o){"use strict";cc._RF.push(e,"0b4a3oAS/VPCYui6rodOrh9","gameUi"),cc.Class({extends:cc.Component,properties:{pauseBoardNode:cc.Node,scoreBoardNode:cc.Node},onLoad:function(){this.gameJs=this.node.getComponent("game")},switchPauseBoard:function(){this.pauseBoardNode.active=this.gameJs.isPause()},showScoreBoardNode:function(t){this.scoreBoardNode.active=!0;var e=this.scoreBoardNode.getChildByName("victory").getComponent(cc.Label);switch(t){case constant.GameStatus.VICTORY:e.string="胜利";break;case constant.GameStatus.DEFEAT:e.string="失败"}}}),cc._RF.pop()},{}],game:[function(t,e,o){"use strict";cc._RF.push(e,"4367eOomrZAAbqOEVe6LpKE","game");var n=t("global");cc.Class({extends:cc.Component,properties:{playerNode:cc.Node},onLoad:function(){cc.director.getPhysicsManager().enabled=!0,this.gameUiJs=this.node.getComponent("gameUi"),this.playerUiJs=this.playerNode.getComponent("playerUi"),this.sceneNode=this.node.getChildByName("scene"),cc.game.on(cc.game.EVENT_HIDE,this.clickPauseBtn,this),this.reset()},start:function(){this.gameStatus=constant.GameStatus.PLAYING},reset:function(){this.gameStatus=constant.GameStatus.NONE;var t="level"+n.level;n.level>2&&(t="level1");for(var e=this.sceneNode.children,o=0;o<e.length;o++)t===e[o].name?e[o].active=!0:e[o].active=!1},clickPauseBtn:function(){this.isPlaying()&&(this.setGameStatus(constant.GameStatus.PAUSE),this.gameUiJs.switchPauseBoard(),this.playerUiJs.stopAni())},clickContinueBtn:function(){this.setGameStatus(constant.GameStatus.PLAYING),this.gameUiJs.switchPauseBoard(),this.playerUiJs.runAni()},clickRestartBtn:function(){cc.director.loadScene("game")},gameWin:function(){this.setGameStatus(constant.GameStatus.VICTORY),this.gameUiJs.showScoreBoardNode(this.gameStatus)},gameOver:function(){this.setGameStatus(constant.GameStatus.DEFEAT),this.gameUiJs.showScoreBoardNode(this.gameStatus)},isPlaying:function(){return this.gameStatus===constant.GameStatus.PLAYING},isPause:function(){return this.gameStatus===constant.GameStatus.PAUSE},setGameStatus:function(t){this.gameStatus=t},update:function(t){this.isPlaying()&&(this.playerNode.x+this.playerNode.width/2<-cc.winSize.width/2||this.playerNode.y+this.playerNode.height/2<-cc.winSize.height/2)&&this.gameOver()}}),cc._RF.pop()},{global:"global"}],global:[function(t,e,o){"use strict";cc._RF.push(e,"a1245oHhyBNHLtBuLfKyhDQ","global"),e.exports={level:1},cc._RF.pop()},{}],"hero-control":[function(t,e,o){"use strict";cc._RF.push(e,"7f83e4cLCpFgYkIfEc+vPuj","hero-control"),cc.Class({extends:cc.Component,properties:{maxSpeed:500,jumps:2,jumpSpeed:1300,drag:100},onLoad:function(){this.Canvas=cc.find("Canvas"),this.Canvas.on("touchstart",this.onKeyDown,this),this.Canvas.on("touchend",this.onKeyUp,this),this.upFlag=!1,this.body=this.getComponent(cc.RigidBody),this.playerUiJs=this.node.getComponent("playerUi")},onKeyDown:function(t){this._upPressed||(this.upFlag=!0),this._upPressed=!0,this.playerUiJs.jumpAni()},onKeyUp:function(t){this._upPressed=!1},update:function(t){var e=this.body.linearVelocity;e.x=0,Math.abs(e.y)<1&&(this.jumps=2),this.jumps>0&&this.upFlag&&(e.y=this.jumpSpeed,this.jumps--),this.upFlag=!1,this.body.linearVelocity=e,0===e.y&&this.playerUiJs.getAnimStatus()!==constant.AnimStatus.RUN&&this.playerUiJs.runAni()}}),cc._RF.pop()},{}],loadmap:[function(t,e,o){"use strict";cc._RF.push(e,"b5ed0gg9CNPSK/lKT77eAzO","loadmap");var n=t("mapdata");cc.Class({extends:cc.Component,properties:{floorPrefab:[cc.Prefab]},onLoad:function(){this.allFloorNodePool={},this.floorsNode=cc.find("Canvas/game/floor");var t=n.level1Floor;this.createrNode(t)},createrNode:function(t){for(var e=0;e<t.length;e++)this.createrPrefab(t[e].name,t[e].p,t[e].rotation,t[e].sensor)},createrPrefab:function(t,e,o,n){for(var i=0;i<this.floorPrefab.length;i++)if(t===this.floorPrefab[i].name){var s=cc.instantiate(this.floorPrefab[i]);this.floorsNode.addChild(s),s.setPosition(cc.p(e.x,e.y)),s.rotation=o;var a=s.getComponent(cc.PhysicsBoxCollider);a.sensor=n,a.apply();break}}}),cc._RF.pop()},{mapdata:"mapdata"}],mapdata:[function(t,e,o){"use strict";cc._RF.push(e,"01c55xsT9dM05cBo5Ku6tds","mapdata");var n=[{name:"floor1",p:{x:-329,y:-226},rotation:0,sensor:!1},{name:"f1",p:{x:369,y:-290},rotation:20,sensor:!1},{name:"floor1",p:{x:1018,y:-226},rotation:0,sensor:!1},{name:"f1",p:{x:1561,y:1},rotation:0,sensor:!0},{name:"f1",p:{x:1688,y:-300},rotation:-20,sensor:!1},{name:"floor2",p:{x:2339,y:-226},rotation:0,sensor:!1},{name:"floor1",p:{x:2958,y:-226},rotation:0,sensor:!1},{name:"floor2",p:{x:3331,y:-226},rotation:0,sensor:!1},{name:"floor3",p:{x:3928,y:-244},rotation:0,sensor:!1},{name:"floor3",p:{x:4391,y:-244},rotation:0,sensor:!1},{name:"floor3",p:{x:4855,y:-244},rotation:0,sensor:!1},{name:"floor4",p:{x:5798,y:-241},rotation:0,sensor:!1},{name:"floor1",p:{x:6905,y:-210},rotation:0,sensor:!1}];e.exports={level1Floor:n},cc._RF.pop()},{}],"one-side-platform":[function(t,e,o){"use strict";cc._RF.push(e,"36e76cnS2BBBYYElgUPdNB1","one-side-platform"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.pointVelPlatform=cc.v2(),this.pointVelOther=cc.v2(),this.relativeVel=cc.v2(),this.relativePoint=cc.v2()},onBeginContact:function(t,e,o){this._pointsCache;for(var n=o.body,i=e.body,s=t.getWorldManifold().points,a=this.pointVelPlatform,c=this.pointVelOther,r=this.relativeVel,l=(this.relativePoint,0);l<s.length;l++){if(i.getLinearVelocityFromWorldPoint(s[l],a),n.getLinearVelocityFromWorldPoint(s[l],c),i.getLocalVector(c.subSelf(a),r),r.y<-32)return;r.y}t.disabled=!0}}),cc._RF.pop()},{}],playerUi:[function(t,e,o){"use strict";cc._RF.push(e,"43b31ptbuBGfqojRGDjZK9I","playerUi"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.animStatus=constant.AnimStatus.NONE,this.animComp=this.node.getComponent(cc.Animation)},start:function(){this.runAni()},jumpAni:function(){this.animStatus=constant.AnimStatus.JUMP,this.animComp.play("player-jump")},runAni:function(){this.animStatus=constant.AnimStatus.RUN,this.animComp.play("player-run")},stopAni:function(){this.animStatus=constant.AnimStatus.NONE,this.animComp.stop()},getAnimStatus:function(){return this.animStatus}}),cc._RF.pop()},{}],player:[function(t,e,o){"use strict";cc._RF.push(e,"0c12aAxGHVCC6G8RDX/66hg","player"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.Game=cc.find("Canvas/game").getComponent("game"),this.jumpTimes=0,this.nodeDefaultX=-380,this.resetPositionFlag=!1,this.anim=this.node.getComponent(cc.Animation)},start:function(){this.anim.play("player-run")},jumpAni:function(){this.anim.play("player-jump")},runAni:function(){this.anim.play("player-run")},playerJump:function(t){this.jumpTimes<2&&(this.resetPositionFlag=!1,this.node.getComponent(cc.RigidBody).linearVelocity=cc.p(0,1e3),this.jumpTimes++,this.anim.play("player-jump"))},onBeginContact:function(t,e,o){if(!1===o.sensor){1!==e.tag&&0===o.node.rotation||(this.jumpTimes=0);var n=this.anim.currentClip;1===e.tag&&0===o.node.rotation?(this.resetPositionFlag=!0,"player-run"!==n.name&&this.anim.play()):0!==o.node.rotation&&"player-roll"!==n.name&&this.anim.play("player-roll")}else!0===o.sensor&&(3===o.tag?this.collisionGold(o.node):this.node.y-this.node.height/2>=o.node.y&&(o.sensor=!1,o.apply()))},onEndContact:function(t,e,o){!0===o.sensor&&this.node.y-this.node.height/2>=o.node.y&&(o.sensor=!1,o.apply())},resetPosition:function(){var t=this.node.x-this.nodeDefaultX;if(Math.abs(t)<50)this.resetPositionFlag=!1;else{var e=this.node.getComponent(cc.RigidBody);t>50?e.linearVelocity=cc.p(-200,0):t<-50&&(e.linearVelocity=cc.p(200,0))}},collisionGold:function(t){t.destroy();var e=this.Game.goldNumLabel.string-0;e++,this.Game.goldNumLabel.string=e},update:function(t){this.resetPositionFlag&&this.resetPosition()}}),cc._RF.pop()},{}],"scene-move":[function(t,e,o){"use strict";cc._RF.push(e,"211a2A13idAw5w3wFf/GOu4","scene-move"),cc.Class({extends:cc.Component,properties:{background:[cc.Node],bgMoveSpeed:80,floorsAndStarsNode:cc.Node,floorsAndStarSpeed:330,cloudNode:cc.Node,cloudSpeed:30},onLoad:function(){this.Game=this.node.getComponent("game"),this.playerNode=this.node.getChildByName("player"),this.floorsAndStarsMove(),this.moveFlag=!0},bgAndCloudMove:function(t){var e=function(e,o){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e.x>-e.width?e.x-=t*o:e.x=e.width-3+n};e(this.background[0],this.bgMoveSpeed),e(this.background[1],this.bgMoveSpeed),e(this.cloudNode,this.cloudSpeed,470)},floorsAndStarsMove:function(){for(var t=this.floorsAndStarsNode.getChildByName("floors").children,e=t[t.length-1].getPositionX()-t[0].getPositionX(),o=0;o<t.length;o++){var n=cc.moveBy(e/this.floorsAndStarSpeed,cc.p(-e,0));if(o===t.length-1){var i=cc.callFunc(function(){this.playerNode.y>t[t.length-1].y&&this.Game.changeGameStatus("victory")},this),s=cc.sequence(n,i);t[o].runAction(s)}else t[o].runAction(n)}for(var a=this.floorsAndStarsNode.getChildByName("stars").children,c=0;c<a.length;c++){var r=cc.moveBy(e/this.floorsAndStarSpeed,cc.p(-e,0));a[c].runAction(r)}},update:function(t){this.moveFlag&&this.bgAndCloudMove(t)}}),cc._RF.pop()},{}],sceneMove:[function(t,e,o){"use strict";cc._RF.push(e,"03cdbs1zMZMcISH2rSrYDG3","sceneMove"),cc.Class({extends:cc.Component,properties:{cloudSpeed:30,mountainSpeed:100,houseSpeed:200,groundSpeed:500},onLoad:function(){this.gameJs=cc.find("Canvas").getComponent("game");var t=this.node.getChildByName("background");this.cloud=t.getChildByName("cloud"),this.mountain=t.getChildByName("mountain"),this.house=t.getChildByName("house"),this.bgList=["cloud","mountain","house"],this.grounds=this.node.getChildByName("ground").children},bgMove:function(t,e){var o=this[t].getChildByName("b1"),n=this[t].getChildByName("b2");o.x-=this[t+"Speed"]*e,n.x-=this[t+"Speed"]*e,this.checkOutOfScene(o,n)},checkOutOfScene:function(t,e){t.x<-cc.winSize.width&&(t.x=cc.winSize.width-6),e.x<-cc.winSize.width&&(e.x=cc.winSize.width-6)},groundMove:function(t){for(var e=0;e<this.grounds.length;e++)this.grounds[e].x-=this.groundSpeed*t},update:function(t){if(this.gameJs.isPlaying()){for(var e=0;e<this.bgList.length;e++)this.bgMove(this.bgList[e],t);this.groundMove(t)}}}),cc._RF.pop()},{}],select:[function(t,e,o){"use strict";cc._RF.push(e,"43cb6cJkEBAXLyoR0/PXQyZ","select");var n=t("global");cc.Class({extends:cc.Component,properties:{backButton:cc.Button,loadingNode:cc.Node},onLoad:function(){this.pageView=cc.find("Canvas/selectView").getComponent(cc.PageView),this.pageViewContent=this.pageView.content,this.pageViewIndicatorNode=this.pageView.indicator.node,this.pageView.node.on("scroll-ended",this.selectLevel,this),this.loadingNode.active=!1},start:function(){var t=this.pageViewContent.children[0];this.scrollNode(t,!0)},selectLevel:function(t){for(var e=t.detail,o=e.getPages(),n=e.getCurrentPageIndex(),i=0;i<o.length;i++){var s=i===n;o[i].getComponent(cc.Button).interactable=s,this.scrollNode(o[i],s)}},scrollNode:function(t,e){var o=t.getChildByName("bg"),n=e?255:123,i=e?1.2:1,s=cc.spawn(cc.tintTo(.3,n,n,n),cc.scaleTo(.3,i));o.runAction(s)},backButtonClick:function(){var t=this;if(!0===this.pageView.enabled)cc.director.loadScene("start");else{this.backButton.interactable=!1;var e=cc.moveBy(1,cc.p(0,100)),o=cc.callFunc(function(){for(var e=t.pageViewContent.children,o=0;o<e.length;o++)e[o].name!==t.clickedNode.name&&e[o].runAction(cc.fadeIn(1));for(var n=0;n<t.levelChildren.length;n++)t.levelChildren[n].active=!1},this),n=cc.callFunc(function(){t.pageView.enabled=!0,t.clickedNode.getComponent(cc.Button).interactable=!0,t.backButton.interactable=!0},this);this.clickedNode.runAction(cc.sequence(cc.spawn(e,o),n)),this.pageViewIndicatorNode.runAction(cc.fadeIn(1))}},clickLevel:function(t){var e=this;this.pageView.enabled=!1,this.clickedNode=t.target,this.clickedNode.getComponent(cc.Button).interactable=!1,this.backButton.interactable=!1,this.levelChildren=this.clickedNode.getChildByName("level").children;var o=cc.moveBy(1,cc.p(0,-100)),n=cc.callFunc(function(){e.backButton.interactable=!0,e.playAnim()},this);this.clickedNode.runAction(cc.sequence(o,n));for(var i=this.pageViewContent.children,s=0;s<i.length;s++)i[s].name!==this.clickedNode.name&&i[s].runAction(cc.fadeOut(1));this.pageViewIndicatorNode.runAction(cc.fadeOut(1))},playAnim:function(){this.playNum=0;for(var t=0;t<this.levelChildren.length-1;t++)this.levelChildren[t].getComponent(cc.Animation).once("finished",this.playNext,this);this.playNext()},playNext:function(){this.levelChildren[this.playNum].active=!0,this.levelChildren[this.playNum].getComponent(cc.Animation).play(),this.playNum++},toGameScene:function(t,e){this.loadingNode.active=!0;var o=e-0;n.level=o,cc.director.preloadScene("game",function(){setTimeout(function(){cc.director.loadScene("game")},1e3)})}}),cc._RF.pop()},{global:"global"}],start:[function(t,e,o){"use strict";cc._RF.push(e,"8cf4ciaNjhHF5crU4dW1iiD","start"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.buttonManage=this.node.getComponent("button-manage");this.buttonManage.setHorse("horse1"),this.loadGoldNum()},start:function(){cc.director.preloadScene("select")},loadGoldNum:function(){var t=cc.sys.localStorage.getItem("goldNum");t=t?t-0:0,this.setGold(t)},setGold:function(t){this.node.getChildByName("goldNum").getComponent(cc.Label).string=t}}),cc._RF.pop()},{}],test:[function(t,e,o){"use strict";cc._RF.push(e,"1526ecE6vRHJqvQA4CUyVLE","test"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.getAllFloorsPosition()},getAllFloorsPosition:function(){for(var t=cc.find("Canvas/game/floor111").children,e=[],o=0;o<t.length;o++){var n=t[o].getComponent(cc.PhysicsBoxCollider).sensor,i={name:t[o].name,p:t[o].getPosition(),rotation:t[o].rotation,sensor:n};e.push(i)}var s=JSON.stringify(e);console.log(s)}}),cc._RF.pop()},{}]},{},["constant","global","mapdata","control","game","gameUi","playerUi","sceneMove","game2","hero-control","loadmap","player","scene-move","select","button-manage","start","test","one-side-platform"]);